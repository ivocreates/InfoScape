<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InfoScape - OSINT Intelligence Toolkit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .title {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00d4ff, #0095ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #aaa;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: #00d4ff;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #00d4ff;
        }

        .feature-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #00d4ff;
        }

        .feature-description {
            color: #ccc;
            line-height: 1.6;
        }

        .demo-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .section-title {
            color: #00d4ff;
            font-size: 1.5rem;
            margin-bottom: 20px;
            border-bottom: 2px solid #00d4ff;
            padding-bottom: 10px;
        }

        .search-form {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-input {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 16px;
        }

        .search-input::placeholder {
            color: #aaa;
        }

        .search-button {
            padding: 15px 30px;
            background: linear-gradient(45deg, #00d4ff, #0095ff);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .search-button:hover {
            transform: scale(1.05);
        }

        .search-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-item {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 3px solid #00d4ff;
        }

        .result-title {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .result-description {
            color: #ccc;
            font-size: 0.9rem;
        }

        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-online {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
        }

        .status-demo {
            background: rgba(255, 165, 0, 0.2);
            color: #ffa500;
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #00d4ff;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }

        .alert-error {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            .search-form {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üåê InfoScape</h1>
            <p class="subtitle">Unified OSINT Intelligence Toolkit ‚Äî Smart, Powerful, Ethical</p>
            <div class="info-panel">
                <strong>Backend Status:</strong> <span id="backend-status" class="status-indicator status-demo">Connecting...</span>
            </div>
        </div>

        <div class="features-grid">
            <div class="feature-card" onclick="showSection('people-search')">
                <div class="feature-icon">üë§</div>
                <h3 class="feature-title">People Search</h3>
                <p class="feature-description">Advanced name, email, phone, username searches across 50+ platforms with intelligent correlation.</p>
            </div>

            <div class="feature-card" onclick="showSection('reverse-lookup')">
                <div class="feature-icon">üîç</div>
                <h3 class="feature-title">Reverse Lookup</h3>
                <p class="feature-description">Phone, email, IP, and address reverse engineering with comprehensive database queries.</p>
            </div>

            <div class="feature-card" onclick="showSection('social-intel')">
                <div class="feature-icon">üì±</div>
                <h3 class="feature-title">Social Intelligence</h3>
                <p class="feature-description">Deep profile analysis across all major social media platforms with behavioral insights.</p>
            </div>

            <div class="feature-card" onclick="showSection('domain-intel')">
                <div class="feature-icon">üåê</div>
                <h3 class="feature-title">Domain Intelligence</h3>
                <p class="feature-description">Comprehensive domain/IP reconnaissance, security scanning, and threat analysis.</p>
            </div>
        </div>

        <!-- People Search Section -->
        <div class="demo-section" id="people-search" style="display: none;">
            <h2 class="section-title">üë§ People Search</h2>
            <form class="search-form" onsubmit="performPeopleSearch(event)">
                <input type="text" class="search-input" id="people-query" placeholder="Enter name, username, or email (e.g., John Doe, @username, user@example.com)" required>
                <button type="submit" class="search-button" id="people-btn">Search</button>
            </form>
            <div id="people-results" class="results-container" style="display: none;"></div>
        </div>

        <!-- Reverse Lookup Section -->
        <div class="demo-section" id="reverse-lookup" style="display: none;">
            <h2 class="section-title">üîç Reverse Lookup</h2>
            <form class="search-form" onsubmit="performReverseLookup(event)">
                <input type="text" class="search-input" id="reverse-query" placeholder="Enter phone number, email, or IP address (e.g., +1-555-123-4567, user@domain.com, 192.168.1.1)" required>
                <button type="submit" class="search-button" id="reverse-btn">Lookup</button>
            </form>
            <div id="reverse-results" class="results-container" style="display: none;"></div>
        </div>

        <!-- Social Intelligence Section -->
        <div class="demo-section" id="social-intel" style="display: none;">
            <h2 class="section-title">üì± Social Intelligence</h2>
            <form class="search-form" onsubmit="performSocialIntel(event)">
                <input type="text" class="search-input" id="social-query" placeholder="Enter username or social media handle (e.g., @username, johndoe123)" required>
                <button type="submit" class="search-button" id="social-btn">Analyze</button>
            </form>
            <div id="social-results" class="results-container" style="display: none;"></div>
        </div>

        <!-- Domain Intelligence Section -->
        <div class="demo-section" id="domain-intel" style="display: none;">
            <h2 class="section-title">üåê Domain Intelligence</h2>
            <form class="search-form" onsubmit="performDomainIntel(event)">
                <input type="text" class="search-input" id="domain-query" placeholder="Enter domain name or IP address (e.g., example.com, 93.184.216.34)" required>
                <button type="submit" class="search-button" id="domain-btn">Analyze</button>
            </form>
            <div id="domain-results" class="results-container" style="display: none;"></div>
        </div>

        <div class="footer">
            <p>¬© 2025 InfoScape | Created by <a href="https://ivocreates.site" style="color: #00d4ff;">Ivo Pereira</a> | Licensed under MPL-2.0</p>
            <p>Educational and ethical use only. Always respect privacy and obtain proper consent.</p>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';
        let backendStatus = 'disconnected';

        // Check backend status on load
        async function checkBackendStatus() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                if (response.ok) {
                    backendStatus = 'connected';
                    document.getElementById('backend-status').textContent = 'Online';
                    document.getElementById('backend-status').className = 'status-indicator status-online';
                } else {
                    throw new Error('Backend not responding');
                }
            } catch (error) {
                backendStatus = 'demo';
                document.getElementById('backend-status').textContent = 'Demo Mode';
                document.getElementById('backend-status').className = 'status-indicator status-demo';
            }
        }

        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.demo-section');
            sections.forEach(section => section.style.display = 'none');
            
            // Show selected section
            document.getElementById(sectionId).style.display = 'block';
            
            // Scroll to section
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        async function performPeopleSearch(event) {
            event.preventDefault();
            const query = document.getElementById('people-query').value;
            const button = document.getElementById('people-btn');
            const resultsDiv = document.getElementById('people-results');

            button.innerHTML = '<div class="spinner"></div>Searching...';
            button.disabled = true;
            resultsDiv.style.display = 'block';

            try {
                const response = await fetch(`${API_BASE}/api/search/people`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        query_type: 'people',
                        first_name: query.split(' ')[0],
                        last_name: query.split(' ')[1] || '',
                        username: query.startsWith('@') ? query.substring(1) : query,
                        email: query.includes('@') ? query : null
                    })
                });

                const data = await response.json();
                displayPeopleResults(data);
            } catch (error) {
                displayError(resultsDiv, 'Search failed. Using demo mode.');
                displayDemoPeopleResults(query);
            } finally {
                button.innerHTML = 'Search';
                button.disabled = false;
            }
        }

        function displayPeopleResults(data) {
            const resultsDiv = document.getElementById('people-results');
            const results = data.results || {};
            const summary = results.summary || {};

            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Search completed! Found ${summary.total_results || 0} results across ${summary.platforms_found?.length || 0} platforms.
                </div>
                <div class="result-item">
                    <div class="result-title">üîç Search Summary</div>
                    <div class="result-description">
                        ‚Ä¢ High confidence matches: ${summary.high_confidence_matches || 0}<br>
                        ‚Ä¢ Email addresses: ${summary.email_addresses?.length || 0}<br>
                        ‚Ä¢ Social profiles: ${summary.social_profiles?.length || 0}<br>
                        ‚Ä¢ Processing time: ${data.processing_time || 0}s
                    </div>
                </div>
                ${(results.sources?.social_media || []).map(profile => `
                    <div class="result-item">
                        <div class="result-title">üì± ${profile.platform}</div>
                        <div class="result-description">
                            Username: ${profile.username}<br>
                            Confidence: ${Math.round((profile.confidence || 0) * 100)}%<br>
                            ${profile.profile_url ? `<a href="${profile.profile_url}" target="_blank" style="color: #00d4ff;">View Profile</a>` : ''}
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function displayDemoPeopleResults(query) {
            const resultsDiv = document.getElementById('people-results');
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Demo search completed for "${query}"
                </div>
                <div class="result-item">
                    <div class="result-title">üì± LinkedIn Profile</div>
                    <div class="result-description">Professional profile found with 85% confidence</div>
                </div>
                <div class="result-item">
                    <div class="result-title">üîç Google Results</div>
                    <div class="result-description">42 search results found across web</div>
                </div>
            `;
        }

        async function performReverseLookup(event) {
            event.preventDefault();
            const query = document.getElementById('reverse-query').value;
            const button = document.getElementById('reverse-btn');
            const resultsDiv = document.getElementById('reverse-results');

            button.innerHTML = '<div class="spinner"></div>Looking up...';
            button.disabled = true;
            resultsDiv.style.display = 'block';

            try {
                const response = await fetch(`${API_BASE}/api/search/reverse`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        query_type: 'reverse',
                        phone: query.includes('+') || query.includes('-') ? query : null,
                        email: query.includes('@') ? query : null,
                        ip_address: /^\d+\.\d+\.\d+\.\d+$/.test(query) ? query : null
                    })
                });

                const data = await response.json();
                displayReverseResults(data);
            } catch (error) {
                displayError(resultsDiv, 'Lookup failed. Using demo mode.');
                displayDemoReverseResults(query);
            } finally {
                button.innerHTML = 'Lookup';
                button.disabled = false;
            }
        }

        function displayReverseResults(data) {
            const resultsDiv = document.getElementById('reverse-results');
            const results = data.results || {};
            
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Reverse lookup completed with ${data.confidence_score || 0}% confidence
                </div>
                ${(results.results || []).map(result => `
                    <div class="result-item">
                        <div class="result-title">üìã ${result.source || 'Directory Match'}</div>
                        <div class="result-description">
                            ${result.name ? `Name: ${result.name}<br>` : ''}
                            ${result.location ? `Location: ${result.location}<br>` : ''}
                            ${result.carrier ? `Carrier: ${result.carrier}<br>` : ''}
                            Confidence: ${Math.round((result.confidence || 0) * 100)}%
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function displayDemoReverseResults(query) {
            const resultsDiv = document.getElementById('reverse-results');
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Demo reverse lookup completed for "${query}"
                </div>
                <div class="result-item">
                    <div class="result-title">üìã Directory Match</div>
                    <div class="result-description">
                        Name: Demo User<br>
                        Location: Demo City, Demo State<br>
                        Confidence: 80%
                    </div>
                </div>
            `;
        }

        async function performSocialIntel(event) {
            event.preventDefault();
            const query = document.getElementById('social-query').value;
            const button = document.getElementById('social-btn');
            const resultsDiv = document.getElementById('social-results');

            button.innerHTML = '<div class="spinner"></div>Analyzing...';
            button.disabled = true;
            resultsDiv.style.display = 'block';

            try {
                const response = await fetch(`${API_BASE}/api/intel/social`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        query_type: 'social_intel',
                        username: query.startsWith('@') ? query.substring(1) : query
                    })
                });

                const data = await response.json();
                displaySocialResults(data);
            } catch (error) {
                displayError(resultsDiv, 'Analysis failed. Using demo mode.');
                displayDemoSocialResults(query);
            } finally {
                button.innerHTML = 'Analyze';
                button.disabled = false;
            }
        }

        function displaySocialResults(data) {
            const resultsDiv = document.getElementById('social-results');
            const results = data.results || {};
            const analytics = results.analytics || {};
            
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Social intelligence analysis completed
                </div>
                <div class="result-item">
                    <div class="result-title">üìä Analytics Summary</div>
                    <div class="result-description">
                        Total profiles found: ${analytics.total_profiles || 0}<br>
                        High confidence matches: ${analytics.high_confidence || 0}<br>
                        Platforms searched: ${analytics.platforms_searched || 0}
                    </div>
                </div>
                ${(results.social_profiles || []).map(profile => `
                    <div class="result-item">
                        <div class="result-title">üì± ${profile.platform}</div>
                        <div class="result-description">
                            Username: ${profile.username}<br>
                            Confidence: ${Math.round((profile.confidence || 0) * 100)}%<br>
                            <a href="${profile.profile_url}" target="_blank" style="color: #00d4ff;">View Profile</a>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function displayDemoSocialResults(query) {
            const resultsDiv = document.getElementById('social-results');
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Demo social intelligence completed for "${query}"
                </div>
                <div class="result-item">
                    <div class="result-title">üì± Facebook</div>
                    <div class="result-description">Profile found with 75% confidence</div>
                </div>
                <div class="result-item">
                    <div class="result-title">üì± Twitter</div>
                    <div class="result-description">Profile found with 82% confidence</div>
                </div>
            `;
        }

        async function performDomainIntel(event) {
            event.preventDefault();
            const query = document.getElementById('domain-query').value;
            const button = document.getElementById('domain-btn');
            const resultsDiv = document.getElementById('domain-results');

            button.innerHTML = '<div class="spinner"></div>Analyzing...';
            button.disabled = true;
            resultsDiv.style.display = 'block';

            try {
                const response = await fetch(`${API_BASE}/api/intel/domain`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        query_type: 'domain_intel',
                        domain: query.includes('.') && !query.includes(' ') ? query : null,
                        ip_address: /^\d+\.\d+\.\d+\.\d+$/.test(query) ? query : null
                    })
                });

                const data = await response.json();
                displayDomainResults(data);
            } catch (error) {
                displayError(resultsDiv, 'Analysis failed. Using demo mode.');
                displayDemoDomainResults(query);
            } finally {
                button.innerHTML = 'Analyze';
                button.disabled = false;
            }
        }

        function displayDomainResults(data) {
            const resultsDiv = document.getElementById('domain-results');
            const domainInfo = data.domain_info || {};
            const security = data.security_scan || {};
            
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Domain intelligence analysis completed
                </div>
                <div class="result-item">
                    <div class="result-title">üåê Domain Information</div>
                    <div class="result-description">
                        Domain: ${domainInfo.domain || 'N/A'}<br>
                        IP: ${domainInfo.ip_address || 'N/A'}<br>
                        Registrar: ${domainInfo.registrar || 'N/A'}<br>
                        Country: ${domainInfo.country || 'N/A'}
                    </div>
                </div>
                <div class="result-item">
                    <div class="result-title">üîí Security Analysis</div>
                    <div class="result-description">
                        SSL Valid: ${security.ssl_valid ? '‚úÖ Yes' : '‚ùå No'}<br>
                        Security Headers: ${security.security_headers || 0}<br>
                        Vulnerabilities: ${security.vulnerabilities || 0}
                    </div>
                </div>
                <div class="result-item">
                    <div class="result-title">üìã Subdomains</div>
                    <div class="result-description">
                        Found ${data.subdomains?.length || 0} subdomains:<br>
                        ${(data.subdomains || []).slice(0, 5).join(', ')}
                    </div>
                </div>
            `;
        }

        function displayDemoDomainResults(query) {
            const resultsDiv = document.getElementById('domain-results');
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Demo domain analysis completed for "${query}"
                </div>
                <div class="result-item">
                    <div class="result-title">üåê Domain Info</div>
                    <div class="result-description">
                        IP: 93.184.216.34<br>
                        Registrar: Demo Registrar<br>
                        Country: United States
                    </div>
                </div>
                <div class="result-item">
                    <div class="result-title">üîí Security</div>
                    <div class="result-description">
                        SSL: ‚úÖ Valid<br>
                        Security Headers: 6<br>
                        Vulnerabilities: 0
                    </div>
                </div>
            `;
        }

        function displayError(container, message) {
            container.innerHTML = `<div class="alert alert-error">‚ö†Ô∏è ${message}</div>`;
        }

        // Initialize on page load
        window.addEventListener('load', function() {
            checkBackendStatus();
        });

        // Check backend status periodically
        setInterval(checkBackendStatus, 30000);
    </script>
</body>
</html>